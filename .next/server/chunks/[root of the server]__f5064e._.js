module.exports = {

"[externals]/next/dist/compiled/next-server/app-route.runtime.dev.js [external] (next/dist/compiled/next-server/app-route.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-route.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page.runtime.dev.js [external] (next/dist/compiled/next-server/app-page.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-page.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[project]/src/services/etherscan.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "fetchEtherscanTransactions": (()=>fetchEtherscanTransactions),
    "fetchEtherscanWalletBalance": (()=>fetchEtherscanWalletBalance),
    "transformToGraphData": (()=>transformToGraphData),
    "transformToTransactionTableData": (()=>transformToTransactionTableData),
    "transformToWalletBalance": (()=>transformToWalletBalance)
});
const CONFIG = {
    MAX_TRANSACTIONS: 200,
    NODE_SIZES: {
        CENTER: 4,
        NORMAL: 2
    },
    WEI_TO_ETH: 1e18,
    CURVATURE: 0.05
};
async function fetchEtherscanWalletBalance(address, apiKey) {
    if (!apiKey) {
        throw new Error("Etherscan API key not configured");
    }
    const response = await fetch(`https://api.etherscan.io/api?module=account&action=balance&address=${address}&tag=latest&apikey=${apiKey}`);
    if (!response.ok) {
        throw new Error(`Etherscan API error: ${response.status}`);
    }
    const data = await response.json();
    if (data.status !== "1") {
        throw new Error(data.message || "Invalid response from Etherscan");
    }
    // const result = data.map((a: EtherscanBalance) => ({result: a.result,address:address}));
    return data.result;
}
async function fetchEtherscanTransactions(address, apiKey) {
    if (!apiKey) {
        throw new Error("Etherscan API key not configured");
    }
    const response = await fetch(`https://api.etherscan.io/api?module=account&action=txlist&address=${address}&startblock=0&endblock=99999999&sort=desc&apikey=${apiKey}`);
    if (!response.ok) {
        throw new Error(`Etherscan API error: ${response.status}`);
    }
    const data = await response.json();
    // console.log("total transactions: ",data.result.length);
    if (data.status !== "1" || !Array.isArray(data.result)) {
        throw new Error(data.message || "Invalid response from Etherscan");
    }
    // return data.result.slice(0, CONFIG.MAX_TRANSACTIONS);
    return data.result;
}
function transformToGraphData(transactions, centerAddress) {
    // console.log('Input transactions:', transactions.length);
    const normalizedCenterAddress = centerAddress.toLowerCase();
    const nodes = new Map();
    const linksMap = new Map();
    // Add center node
    nodes.set(normalizedCenterAddress, {
        id: normalizedCenterAddress,
        val: CONFIG.NODE_SIZES.CENTER,
        isCenter: true,
        totalTransactions: 0,
        totalReceived: 0,
        totalSent: 0,
        x: 0,
        y: 0
    });
    // Process transactions
    transactions.forEach((tx)=>{
        const fromAddress = tx.from.toLowerCase();
        const toAddress = tx.to?.toLowerCase();
        const value = parseFloat(tx.value) / CONFIG.WEI_TO_ETH;
        // Skip only if toAddress is undefined
        if (!toAddress) return;
        // Add or update nodes
        if (!nodes.has(fromAddress)) {
            nodes.set(fromAddress, {
                id: fromAddress,
                val: CONFIG.NODE_SIZES.NORMAL,
                isCenter: false,
                totalTransactions: 0,
                totalReceived: 0,
                totalSent: 0,
                x: 0,
                y: 0
            });
        }
        if (!nodes.has(toAddress)) {
            nodes.set(toAddress, {
                id: toAddress,
                val: CONFIG.NODE_SIZES.NORMAL,
                isCenter: false,
                totalTransactions: 0,
                totalReceived: 0,
                totalSent: 0,
                x: 0,
                y: 0
            });
        }
        // Create link
        const link = {
            id: tx.hash,
            source: fromAddress,
            target: toAddress,
            val: value,
            hash: tx.hash,
            timestamp: tx.timeStamp,
            gasPrice: tx.gasPrice,
            gasUsed: tx.gasUsed,
            methodId: tx.methodId,
            functionName: tx.functionName
        };
        linksMap.set(tx.hash, link);
        // Update node statistics
        const fromNode = nodes.get(fromAddress);
        const toNode = nodes.get(toAddress);
        fromNode.totalTransactions = (fromNode.totalTransactions || 0) + 1;
        fromNode.totalSent = (fromNode.totalSent || 0) + value;
        toNode.totalTransactions = (toNode.totalTransactions || 0) + 1;
        toNode.totalReceived = (toNode.totalReceived || 0) + value;
    });
    const nodeArray = Array.from(nodes.values());
    const linkArray = Array.from(linksMap.values()).map((link, index, array)=>({
            ...link,
            curvature: (index - array.length / 2) * CONFIG.CURVATURE
        }));
    ;
    // console.log('Transformation results:', {
    //   inputTransactions: transactions.length,
    //   outputNodes: nodeArray.length,
    //   outputLinks: linkArray.length
    // });
    return {
        nodes: nodeArray,
        links: linkArray,
        metadata: {
            dataSource: 'etherscan',
            totalTransactions: linkArray.length,
            uniqueAddresses: nodeArray.length,
            centerAddress: normalizedCenterAddress,
            totalValue: linkArray.reduce((sum, link)=>sum + link.val, 0)
        }
    };
}
function transformToTransactionTableData(transactions, centerAddress) {
    const normalizedCenterAddress = centerAddress.toLowerCase();
    return transactions.map((tx)=>{
        const fromAddress = tx.from.toLowerCase();
        const toAddress = tx.to?.toLowerCase() ?? '';
        // Calculate transaction type
        const type = fromAddress === normalizedCenterAddress ? 'outgoing' : 'incoming';
        // Calculate amount in ETH
        const amount = (parseFloat(tx.value) / CONFIG.WEI_TO_ETH).toFixed(6);
        // Calculate gas cost in ETH
        // Calculate gas cost in ETH using BigInt
        const gasCostInWei = BigInt(tx.gasUsed) * BigInt(tx.gasPrice);
        const gasCostInEth = (gasCostInWei * BigInt(1000000) / BigInt(CONFIG.WEI_TO_ETH)).toString();
        const formattedGasCost = (parseInt(gasCostInEth) / 1000000).toFixed(6);
        // Format UTC timestamp
        const utcTimestamp = new Date(parseInt(tx.timeStamp) * 1000).toISOString().replace('T', ' ').slice(0, 19) + ' UTC';
        return {
            type,
            hash: tx.hash,
            amount: `${amount} ETH`,
            from: fromAddress,
            to: toAddress,
            timestamp: utcTimestamp,
            status: tx.isError === '0' ? 'success' : 'failed',
            gasUsed: `${formattedGasCost} ETH`
        };
    });
}
function transformToWalletBalance(address, balanceData) {
    try {
        // Ensure we have a valid balance string
        if (!balanceData) {
            return {
                address: address,
                balance: {
                    eth: "0.000000"
                }
            };
        }
        // Convert wei to ETH
        const balanceInEth = (BigInt(balanceData) * BigInt(1000000) / BigInt(CONFIG.WEI_TO_ETH)).toString();
        // Convert to number with 6 decimal places
        const formattedBalance = (parseInt(balanceInEth) / 1000000).toFixed(6);
        return {
            address: address,
            balance: {
                eth: formattedBalance
            }
        };
    } catch (error) {
        console.error("Error transforming wallet balance:", error);
        return {
            address: address,
            balance: {
                eth: "0.000000"
            }
        };
    }
}
}}),
"[project]/src/app/api/addresses/[address]/balance/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "GET": (()=>GET)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$etherscan$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/src/services/etherscan.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/zod/lib/index.mjs [app-route] (ecmascript)");
;
;
;
const addressSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().regex(/^0x[a-fA-F0-9]{40}$/);
const { ETHERSCAN_API_KEY } = process.env;
async function GET(request, { params }) {
    try {
        const { address } = await params;
        const validatedAddress = addressSchema.parse(address.toLowerCase());
        if (!ETHERSCAN_API_KEY) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: 'Etherscan API key not configured'
            }, {
                status: 500
            });
        }
        const etherscanData = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$etherscan$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fetchEtherscanWalletBalance"])(validatedAddress, ETHERSCAN_API_KEY);
        console.log(etherscanData);
        const balanceData = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$etherscan$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["transformToWalletBalance"])(validatedAddress, etherscanData);
        console.log(balanceData);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(balanceData);
    } catch (error) {
        console.error('Error fetching wallet balance:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: error instanceof Error ? error.message : 'Failed to fetch wallet balance'
        }, {
            status: 500
        });
    }
}
}}),
"[project]/ (server-utils)": ((__turbopack_context__) => {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, t: __turbopack_require_real__ } = __turbopack_context__;
{
}}),

};

//# sourceMappingURL=%5Broot%20of%20the%20server%5D__f5064e._.js.map